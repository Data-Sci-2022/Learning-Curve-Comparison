---
title: "Project Plan_Soobin"
author: "Soobin Choi"
date: "2022-10-01"
output: 
  github_document: 
    toc: TRUE
---



```{r setup, message=FALSE}
knitr::opts_chunk$set(echo=TRUE, include=TRUE, comment="")
library(tidyverse)
library(dplyr)
library(tidytext)
library(tidyr)
```

```{r}
KLC <- read_tsv(file = "https://github.com/jungyeul/korean-learner-corpus/raw/main/data/kyunghee_v2.tsv", locale(encoding = "UTF-8")) 
```

```{r}
KLC <- KLC %>% 
  rename(ID = X1,
         Nationality = X2,
         Gender = X3,
         Topic = X4,
         Text = X5,
         Morphemes = X6,
         Level = X7,
         Score = X8)
KLC_clean <- KLC %>% 
  filter(Level %in% c("A1", "A2", "B1", "B2", "C1", "C2"))

KLC_clean %>% 
  filter(Level %in% c("C1", "C2")) %>% 
  filter(Nationality %in% c("미국", "영국", "호주"))

# There are only six 
```


```{r}
KLC_eng <- KLC_clean %>% 
  filter(Nationality == "미국"
        | Nationality == "영국" 
        | Nationality == "호주"
        | Nationality == "필리핀"
        | Nationality == "싱가포르"
        | Nationality == "인도"
        | Nationality == "르완다")

KLC_eng %>% 
  select(ID, Nationality, Text) %>% 
  unnest_tokens(word, Text) %>% 
  group_by(ID)

KLC_eng %>% 
  select(ID,Nationality, Text)

KLC_token <- KLC_eng %>% 
  unnest_tokens(word, Text) %>% 
  count(ID)

KLC_clean %>% 
  filter(Nationality %in% c("미국", "영국", "호주"))
```

When filtering nationality of participants, I was not sure what sort of criterium I should apply. I know a huge part of the population in Thailand speaks English, then should I include them too?

So, I ended up sorting out the countries whose official language includes English.
It would have been easier for me to sort out if there is a column about their first language, not their nationality.


** Importing Data
```{r}
PELIC_ans <- read_csv("https://github.com/ELI-Data-Mining-Group/PELIC-dataset/raw/master/corpus_files/answer.csv")

PELIC_crs <- read_csv("https://github.com/ELI-Data-Mining-Group/PELIC-dataset/raw/master/corpus_files/course.csv")

PELIC_id <- read_csv("https://github.com/ELI-Data-Mining-Group/PELIC-dataset/raw/master/corpus_files/student_information.csv")

PELIC_scr <- read_csv("https://github.com/ELI-Data-Mining-Group/PELIC-dataset/raw/master/corpus_files/test_scores.csv")
```


** sorting out columns needed
```{r}

PELIC_scr1 <- PELIC_scr %>% 
  select(anon_id, MTELP_Conv_Score, Writing_Sample)

PELIC_crs1 <- PELIC_crs %>% 
  select(course_id, level_id)

PELIC_ans1 <- PELIC_ans %>%
  select(anon_id, course_id, text_len, text, tokens)
  
PELIC_id1 <- PELIC_id %>% 
  select(anon_id, native_language)

```

* course_id: a unique identifier for each course - a 1-4 digit integer, e.g. 987

* level_id:	a code to identify in which of the four levels the text was produced (5 the highest)



** Joining all the columns in one dataframe
```{r}
PELIC1 <- full_join(PELIC_ans1, PELIC_crs1, by = "course_id")
PELIC2 <- full_join(PELIC1, PELIC_id1,by = "anon_id")
PELIC3 <- full_join(PELIC2, PELIC_scr1, by = "anon_id")

PELIC_clean <- PELIC3 %>% 
  filter(native_language == "Korean", text_len > 10, level_id == 5)  

head(PELIC_clean)  
```













